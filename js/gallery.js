// Photo data with actual photos
const photoData = {
    portrait: [
        {
            src: 'images/portrait/portrait24-min.jpg',
            title: 'Portrait 24',
            description: 'Creative portrait'
        },
        {
            src: 'images/portrait/portrait23-min.jpg',
            title: 'Portrait 23',
            description: 'Portrait session'
        },
        {
            src: 'images/portrait/portrait22-min.jpg',
            title: 'Portrait 22',
            description: 'Professional photography'
        },
        {
            src: 'images/portrait/portrait21-min.jpg',
            title: 'Portrait 21',
            description: 'Studio portrait'
        },
        {
            src: 'images/portrait/portrait20-min.jpg',
            title: 'Portrait 20',
            description: 'Creative portrait'
        },
        {
            src: 'images/portrait/portrait19-min.jpg',
            title: 'Portrait 19',
            description: 'Studio portrait'
        },
        {
            src: 'images/portrait/portrait17-min.jpg',
            title: 'Portrait 17',
            description: 'Professional portrait'
        },
        {
            src: 'images/portrait/portrait16-min.JPG',
            title: 'Portrait 16',
            description: 'Studio portrait'
        },
        {
            src: 'images/portrait/portrait15-min.jpg',
            title: 'Portrait 15',
            description: 'Creative portrait'
        },
        {
            src: 'images/portrait/portrait14-min.jpg',
            title: 'Portrait 14',
            description: 'Professional photography'
        },
        {
            src: 'images/portrait/portrait13-min.jpg',
            title: 'Portrait 13',
            description: 'Portrait session'
        },
        {
            src: 'images/portrait/portrait12-min.jpg',
            title: 'Portrait 12',
            description: 'Creative portrait'
        },
        {
            src: 'images/portrait/portrait11-min.jpg',
            title: 'Portrait 11',
            description: 'Studio portrait'
        },
        {
            src: 'images/portrait/portrait10-min.jpg',
            title: 'Portrait 10',
            description: 'Professional portrait'
        },
        {
            src: 'images/portrait/portrait9-min.jpg',
            title: 'Portrait 9',
            description: 'Studio portrait'
        },
        {
            src: 'images/portrait/portrait8-min.jpg',
            title: 'Portrait 8',
            description: 'Creative portrait'
        },
        {
            src: 'images/portrait/portrait7-min.jpg',
            title: 'Portrait 7',
            description: 'Professional photography'
        },
        {
            src: 'images/portrait/wedding1-min.JPG',
            title: 'Wedding Portrait',
            description: 'Wedding photography'
        }
    ],
    events: [
        {
            src: 'images/events/WhatsApp Image 2025-02-09 at 00.07.47_48ef2892-min.jpg',
            title: 'Event Photo 1',
            description: 'Special moments captured'
        },
        {
            src: 'images/events/WhatsApp Image 2025-02-09 at 00.07.46_5a8b63b5-min.jpg',
            title: 'Event Photo 2',
            description: 'Memorable events'
        },
        {
            src: 'images/events/WhatsApp Image 2025-02-08 at 23.59.47_cdffcab7-min.jpg',
            title: 'Event Photo 3',
            description: 'Event gathering'
        },
        {
            src: 'images/events/WhatsApp Image 2025-02-08 at 23.59.47_0ff01a7c-min.jpg',
            title: 'Event Photo 4',
            description: 'Special moments'
        },
        {
            src: 'images/events/WhatsApp Image 2025-02-08 at 23.31.08_a0270237-min.jpg',
            title: 'Event Photo 5',
            description: 'Event portrait'
        },
        {
            src: 'images/events/WhatsApp Image 2025-02-08 at 23.30.19_7ab8a811-min.jpg',
            title: 'Event Photo 6',
            description: 'Event memories'
        },
        {
            src: 'images/events/WhatsApp Image 2025-02-08 at 23.29.47_b5b80d5e-min.jpg',
            title: 'Event Photo 7',
            description: 'Event gathering'
        },
        {
            src: 'images/events/WhatsApp Image 2025-02-08 at 23.29.24_8ba8ae55-min.jpg',
            title: 'Event Photo 8',
            description: 'Event moments'
        }
    ],
    products: [
        {
            src: 'images/products/IMG_0436-min.JPG',
            title: 'Product 1',
            description: 'Product showcase'
        },
        {
            src: 'images/products/IMG_0435-min.JPG',
            title: 'Product 2',
            description: 'Product photography'
        },
        {
            src: 'images/products/IMG_0434-min.JPG',
            title: 'Product 3',
            description: 'Product display'
        },
        {
            src: 'images/products/137A4449 copy-min.jpg',
            title: 'Product 4',
            description: 'Product showcase'
        },
        {
            src: 'images/products/137A4444 copy-min.jpg',
            title: 'Product 5',
            description: 'Product photography'
        },
        {
            src: 'images/products/137A4435 copy-min.jpg',
            title: 'Product 6',
            description: 'Product display'
        },
        {
            src: 'images/products/137A4434 copy-min.jpg',
            title: 'Product 7',
            description: 'Product showcase'
        },
        {
            src: 'images/products/٢٩-min.jpg',
            title: 'Product 8',
            description: 'Product photography'
        },
        {
            src: 'images/products/٢٦-min.jpg',
            title: 'Product 9',
            description: 'Product display'
        },
        {
            src: 'images/products/٢٥-min.jpg',
            title: 'Product 10',
            description: 'Product showcase'
        },
        {
            src: 'images/products/١٧-min.jpg',
            title: 'Product 11',
            description: 'Product photography'
        },
        {
            src: 'images/products/١٤-min.jpg',
            title: 'Product 12',
            description: 'Product display'
        },
        {
            src: 'images/products/12-min.jpg',
            title: 'Product 13',
            description: 'Product showcase'
        },
        {
            src: 'images/products/١٠-min.jpg',
            title: 'Product 14',
            description: 'Product photography'
        },
        {
            src: 'images/products/٩-min.jpg',
            title: 'Product 15',
            description: 'Product display'
        },
        {
            src: 'images/products/9-min.jpg',
            title: 'Product 16',
            description: 'Product showcase'
        },
        {
            src: 'images/products/٨-min.jpg',
            title: 'Product 17',
            description: 'Product photography'
        },
        {
            src: 'images/products/7-min.jpg',
            title: 'Product 18',
            description: 'Product display'
        },
        {
            src: 'images/products/٣-min.jpg',
            title: 'Product 19',
            description: 'Product showcase'
        },
        {
            src: 'images/products/3 (1)-min.jpg',
            title: 'Product 20',
            description: 'Product photography'
        },
        {
            src: 'images/products/٢-min.jpg',
            title: 'Product 21',
            description: 'Product display'
        }
    ],
    locations: [
        {
            src: 'images/locations/IMG_1069 copy-min.jpg',
            title: 'Location 1',
            description: 'Beautiful location'
        },
        {
            src: 'images/locations/IMG_1067 copy-min.jpg',
            title: 'Location 2',
            description: 'Scenic view'
        },
        {
            src: 'images/locations/IMG_1065 copy-min.jpg',
            title: 'Location 3',
            description: 'Location photography'
        },
        {
            src: 'images/locations/IMG_1063 copy-min.jpg',
            title: 'Location 4',
            description: 'Location showcase'
        },
        {
            src: 'images/locations/IMG_1064 copy-min.jpg',
            title: 'Location 5',
            description: 'Location view'
        },
        {
            src: 'images/locations/IMG_10866 copy-min.jpg',
            title: 'Location 6',
            description: 'Location photography'
        },
        {
            src: 'images/locations/IMG_1072 copy-min.jpg',
            title: 'Location 7',
            description: 'Location showcase'
        },
        {
            src: 'images/locations/IMG_1071 copy-min.jpg',
            title: 'Location 8',
            description: 'Location view'
        },
        {
            src: 'images/locations/IMG_1070 copy-min.jpg',
            title: 'Location 9',
            description: 'Location photography'
        }
    ]
};

// Modal functionality
let currentImageIndex = 0;
let currentImages = [];

// Create modal elements if they don't exist
function createModalElements() {
    if (!document.getElementById('imageModal')) {
        const modal = document.createElement('div');
        modal.id = 'imageModal';
        modal.className = 'modal';
        modal.innerHTML = `
            <div class="modal-content">
                <span class="modal-close">&times;</span>
                <button class="modal-prev">&lt;</button>
                <img id="modalImage" src="" alt="Modal Image">
                <button class="modal-next">&gt;</button>
            </div>
        `;
        document.body.appendChild(modal);
    }
}

// Initialize modal elements
createModalElements();

const modal = document.getElementById('imageModal');
const modalImg = document.getElementById('modalImage');
const closeBtn = document.querySelector('.modal-close');
const prevBtn = document.querySelector('.modal-prev');
const nextBtn = document.querySelector('.modal-next');

function openModal(index) {
    currentImageIndex = index;
    modalImg.src = currentImages[currentImageIndex].src;
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
    updateNavigationButtons();
}

function closeModal() {
    modal.classList.remove('show');
    document.body.style.overflow = '';
}

function showPrevImage() {
    currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
    modalImg.src = currentImages[currentImageIndex].src;
    updateNavigationButtons();
}

function showNextImage() {
    currentImageIndex = (currentImageIndex + 1) % currentImages.length;
    modalImg.src = currentImages[currentImageIndex].src;
    updateNavigationButtons();
}

function updateNavigationButtons() {
    prevBtn.style.visibility = currentImages.length > 1 ? 'visible' : 'hidden';
    nextBtn.style.visibility = currentImages.length > 1 ? 'visible' : 'hidden';
}

// Event listeners for modal
closeBtn.addEventListener('click', closeModal);
prevBtn.addEventListener('click', showPrevImage);
nextBtn.addEventListener('click', showNextImage);

// Close modal when clicking outside the image
modal.addEventListener('click', (e) => {
    if (e.target === modal) {
        closeModal();
    }
});

// Keyboard navigation
document.addEventListener('keydown', (e) => {
    if (!modal.classList.contains('show')) return;
    
    switch(e.key) {
        case 'Escape':
            closeModal();
            break;
        case 'ArrowLeft':
            showPrevImage();
            break;
        case 'ArrowRight':
            showNextImage();
            break;
    }
});

// Function to get category from URL
function getCategoryFromUrl() {
    const params = new URLSearchParams(window.location.search);
    return params.get('category') || 'portrait';
}

// Function to load category photos
function loadCategoryPhotos() {
    const category = getCategoryFromUrl();
    const galleryGrid = document.querySelector('.gallery-grid');
    const galleryTitle = document.getElementById('gallery-title');
    
    // Update page title
    galleryTitle.textContent = category === 'all' ? 'All Photography' : category.charAt(0).toUpperCase() + category.slice(1) + ' Gallery';
    
    // Clear existing content
    galleryGrid.innerHTML = '';
    
    // Get photos for the category
    let photos = [];
    if (category === 'all') {
        // Combine all categories
        Object.values(photoData).forEach(categoryPhotos => {
            photos = photos.concat(categoryPhotos);
        });
    } else {
        photos = photoData[category] || [];
    }
    
    currentImages = photos;
    
    // Create gallery items
    photos.forEach((photo, index) => {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        
        item.innerHTML = `
            <img src="${photo.src}" alt="${photo.title}" loading="lazy">
        `;
        
        // Add click event to open modal
        item.addEventListener('click', () => openModal(index));
        
        galleryGrid.appendChild(item);
    });
    
    // Trigger initial animation check
    handleScrollAnimations();
}

// Function to check if an element is in viewport
function isInViewport(element) {
    const rect = element.getBoundingClientRect();
    return (
        rect.top <= (window.innerHeight || document.documentElement.clientHeight) * 0.8
    );
}

// Function to handle scroll animations
function handleScrollAnimations() {
    const items = document.querySelectorAll('.gallery-item:not(.visible)');
    
    items.forEach(item => {
        if (isInViewport(item)) {
            item.classList.add('visible');
        }
    });
}

// Function to load images
function loadImages() {
    const images = document.querySelectorAll('.gallery-item img[data-src]');
    
    images.forEach(img => {
        if (img.dataset.src) {
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
        }
    });
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    // Load category photos
    loadCategoryPhotos();
    
    // Add scroll event listener with throttling
    let isScrolling = false;
    window.addEventListener('scroll', () => {
        if (!isScrolling) {
            window.requestAnimationFrame(() => {
                handleScrollAnimations();
                isScrolling = false;
            });
            isScrolling = true;
        }
    });

    // Initialize portfolio items with modal functionality
    const portfolioItems = document.querySelectorAll('.portfolio-item');
    portfolioItems.forEach((item, index) => {
        item.addEventListener('click', () => {
            const img = item.querySelector('img');
            currentImages = Array.from(portfolioItems).map(item => ({
                src: item.querySelector('img').src,
                alt: item.querySelector('img').alt
            }));
            openModal(index);
        });
    });
}); 